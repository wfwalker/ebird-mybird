<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <title>ebird-mybird</title>

    <meta name="description" content="ebird-mybird : An offline web app for browsing your personal eBird sightings">

    <link rel="manifest" href="./w3c-manifest.json">
    <link rel="shortcut icon" href="./images/ebird-favicon.ico">

    <link rel="stylesheet" type="text/css" media="screen" href="styles/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="styles/c3.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="styles/app.css">

    <script id="home-template" type="x-handlebars-template">
      <h3>{{owner}}&apos;s eBird</h3>

      <div>
        {{nicenumber numSightings}} sightings in {{nicenumber numChecklists}} checklists
        from {{nicedate earliest}} - {{nicedate latest}}
      </div>

      <div id={{yearChartID}} style='padding-top: 10px'></div>

      {{bargraph sightingsByYear yearChartID}}

      <div id={{monthChartID}} style='padding-top: 10px'></div>

      {{monthgraph sightingsByMonth monthChartID}}
    </script>

    <script id="chrono-template" type="x-handlebars-template">
      <h3>{{firstSightings.length}} species</h3>
      {{#each firstSightings}}
        <div>{{nicedate this.DateObject}} <a href="#taxon/{{[Common Name]}}">{{[Common Name]}}</a></div>
      {{/each}}
    </script>

    <script id="taxons-template" type="x-handlebars-template">
      <h3>{{lifeSightings.length}} species</h3>

      <div class="biglist">
      {{#each lifeSightings}}
        <div><a href="#taxon/{{[Common Name]}}">{{[Common Name]}}</a></div>
      {{/each}}
      </div>
    </script>

    <script id="taxon-template" type="x-handlebars-template">
      <h3>{{name}} <span style='font-weight: lighter'>| {{scientificName}}<span></h3>

      {{#each photos}}
        <span><a href="{{this.photoURL}}"><img src="{{this.thumbURL}}"></a></span>
      {{/each}}

      <div id={{chartID}} style='padding-top: 10px'></div>

      {{monthgraph sightingsByMonth chartID}}

      <div>{{sightings.length}} sightings</div>

      <div class="biglist">
      {{#each sightings}}
        <div>
          <a href="#trip/{{this.Date}}">{{nicedate this.DateObject}}</a>
          <a href="#location/{{this.Location}}">{{this.Location}}</a>
        </div>
      {{/each}}
      </div>
    </script>

    <script id="locations-template" type="x-handlebars-template">
      <h3>{{locations.length}} locations</h3>

      <div class="biglist">
      {{#each locations}}
        <div><a href="#location/{{this}}">{{this}}</a></div>
      {{/each}}
      </div>
    </script>

    <script id="location-template" type="x-handlebars-template">
      <h3>{{name}} <span style='font-weight: lighter'>| {{county}}, {{state}}<span></h3>
      <div><a target="_blank" href="https://www.openstreetmap.org/?mlat={{latitude}}&mlon={{longitude}}#map=10/{{latitude}}/{{longitude}}">{{latitude}},{{longitude}}</a></div>
      <div>
      {{#each photos}}
        <span><a href="{{this.photoURL}}"><img src="{{this.thumbURL}}"></a></span>
      {{/each}}
      </div>

      <div id={{chartID}} style='padding-top: 10px'></div>

      {{monthgraph sightingsByMonth chartID}}

      <div>{{taxons.length}} species on {{dateObjects.length}} dates</div>

      <div class="biglist">
      {{#each taxons}}
        <div>
          <a href="#taxon/{{this}}">{{this}}</a>
        </div>
      {{/each}}
      </div>
    </script>

    <script id="trips-template" type="x-handlebars-template">
      <h3>{{trips.length}} trips</h3>

      <div class="biglist">
      {{#each trips}}
        <div><a href="#trip/{{ebirddate this}}">{{nicedate this}}</a> {{lookup ../customDayNames (ebirddate this)}}</div>
      {{/each}}
      </div>
    </script>

    <script id="year-template" type="x-handlebars-template">
      <h3>{{year}}</h3>

      <div>{{yearSightings.length}} sightings, {{yearSpecies.length}} species</div>

      {{#each photos}}
        <span><a href="{{this.photoURL}}"><img src="{{this.thumbURL}}"></a></span>
      {{/each}}

      <div class="biglist">
      {{#each yearSpecies}}
        <div><a href="#taxon/{{this}}">{{this}}</a></div>
      {{/each}}
      </div>
    </script>

    <script id="trip-template" type="x-handlebars-template">
      <h3>{{nicedate tripDate}} <span style='font-weight: lighter'>| {{customName}}</span></h3>

      {{#each comments}}
        <div style='font-style: italic'>{{this}}</div>
      {{/each}}

      {{#each photos}}
        <span><a href="{{this.photoURL}}"><img src="{{this.thumbURL}}"></a></span>
      {{/each}}

      <div>
      {{#each sightingList.checklists}}
        <span><a target='_blank' href='http://ebird.org/ebird/view/checklist?subID={{this}}'>{{this}}</a></span>
      {{/each}}
      </div>

      <div>
        {{sightingList.rows.length}} sightings at
        {{#if sightingList.multipleLocations}}
          {{sightingList.locations.length}} locations
        {{else}}
          {{sightingList.locations}}
        {{/if}}
      </div>

      {{#each sightingList.rows}}
        <div>
          {{#if sightingList.multipleLocations}}
          <a href='#location/{{this.Location}}'>{{this.Location}}</a>
          {{/if}}
          <a href='#taxon/{{[Common Name]}}'>{{[Common Name]}}</a>
        </div>
      {{/each}}
    </script>

    <script id="debug-template" type="x-handlebars-template">
      <h3>debugging info</h3>
      <div>{{photos.length}} photos</div>

      <h4>Please add an eBird checklist for these {{photosMissingTrip.length}} photos:</h4>

      {{#each photosMissingTrip}}
        <div> <img height='32px' src="{{this.thumbURL}}"> {{this.location}} {{this.date}} {{this.scientificName}}</div>
      {{/each}}

      <h4>These {{photosMissingLocation.length}} photos have locations missing from your eBird data:</h4>

      {{#each photosMissingLocation}}
        <div> <img height='32px' src="{{this.thumbURL}}"> {{this.location}} <a href="#trip/{{this.tripDate}}">{{this.date}}</a> {{this.scientificName}}</div>
      {{/each}}

      <h4>Sighting has slashes:</h4>

      {{#each brokenLocations}}
        <div>{{this}}</div>
      {{/each}}

      <h4>Here is a copy of your clean photos.json</h4>

      <pre>
      [
      {{#each photos}}
        { "location": "{{this.location}}", "tripDate": "{{this.tripDate}}", "thumbURL": "{{thumbURL}}" }
      {{/each}}
      ]
      </pre>
    </script>
  </head>

  <body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <span id="project_title">ebird-mybird</span>
          <span id="project_tagline"> | A personal website for your eBird data</span>
          <div>
            <a data-hash="trips" href="#trips">trips</a>
            <a data-hash="locations" href="#locations">locations</a>
            <a data-hash="taxons" href="#taxons">species</a>
            <a data-hash="home" href="#home">home</a>
            <a data-hash="chrono" href="#chrono">chrono</a>
        </div>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="loading" class="card inner">
        <center>loading</center>
      </section>

      <section id="home" class="hidden card inner">
        <div id='home-results' class='inner'>
        </div>
      </section>

      <section id="locations" class="hidden card inner">
        <div id='locations-results' class='inner'>
        </div>
      </section>

      <section id="location" class="hidden card inner">
        <div id='location-results' class='inner'>
        </div>
      </section>

      <section id="trips" class="hidden card inner">
        <div id='trips-results' class='inner'>
        </div>
      </section>

      <section id="trip" class="hidden card inner">
        <div id='trip-results' class='inner'>
        </div>
      </section>

      <section id="year" class="hidden card inner">
        <div id='year-results' class='inner'>
        </div>
      </section>

      <section id="taxons" class="hidden card inner">
        <div id='taxons-results' class='inner'>
        </div>
      </section>

      <section id="chrono" class="hidden card inner">
        <div id='chrono-results' class='inner'>
        </div>
      </section>

      <section id="taxon" class="hidden card inner">
        <div id='taxon-results' class='inner'>
        </div>
      </section>

      <section id="debug" class="hidden card inner">
        <div id='debug-results' class='inner'>
        </div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Bootstrapped with <a target="_blank_" href="https://github.com/mozilla/oghliner/">oghliner</a>.</p>
        <p class="copyright">Check out <a target="_blank_" href="https://github.com/wfwalker/ebird-mybird">the source code on github</a>
      </footer>
    </div>
  </body>

  <script src="scripts/offline-manager.js"></script>
  <script src="scripts/d3.v3.min.js" charset="utf-8"></script>
  <script src="scripts/c3.min.js"></script>
  <script src="scripts/papaparse.min.js"></script>
  <script src="scripts/handlebars-v4.0.4.js"></script>
  <script src="scripts/sightinglist.js"></script>
  <script src="scripts/app.js"></script>
</html>
